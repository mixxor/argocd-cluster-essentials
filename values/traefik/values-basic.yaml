---
# Traefik configuration for Infomaniak (OpenStack Octavia LoadBalancer)
deployment:
  replicas: 2
# Service configuration - LoadBalancer for Octavia
service:
  enabled: true
  type: LoadBalancer
  annotations: {}
# Ports configuration
ports:
  web:
    port: 8000
    expose:
      default: true
    exposedPort: 80
    protocol: TCP
  websecure:
    port: 8443
    expose:
      default: true
    exposedPort: 443
    protocol: TCP
    tls:
      enabled: true
# Ingress class
ingressClass:
  enabled: true
  isDefaultClass: true
# IngressRoute for dashboard (disabled by default for security)
ingressRoute:
  dashboard:
    enabled: false
# Resources
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 256Mi
# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 65532
  runAsGroup: 65532
  seccompProfile:
    type: RuntimeDefault
containerSecurityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop: [ALL]
    add: [NET_BIND_SERVICE]
# Pod disruption budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1
# Logs
logs:
  general:
    level: INFO
  access:
    enabled: true
# Providers
providers:
  kubernetesIngress:
    enabled: true
    publishedService:
      enabled: true
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: false
